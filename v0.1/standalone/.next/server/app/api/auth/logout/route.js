"use strict";(()=>{var e={};e.id=7716,e.ids=[7716],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97793:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>P,originalPathname:()=>_,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var r={};o.r(r),o.d(r,{POST:()=>p});var s=o(95419),a=o(69108),n=o(99678),i=o(69304);let u={login:e=>i.ZP.post("api/users/login",e),register:e=>i.ZP.post("api/users",e),auth:e=>i.ZP.post("api/auth",e,{baseUrl:""}),logoutFromNextServerToServer:e=>i.ZP.delete("api/users/me",{headers:{Authorization:`Bearer ${e}`}}),logoutFromNextClientToNextServer:(e,t)=>i.ZP.post("/api/auth/logout",{force:e},{baseUrl:"",signal:t}),updateUserClient:(e,t)=>i.ZP.put(`api/users/${t}`,e),updateEmployee:(e,t)=>i.ZP.put(`api/users/${t}`,e),getCsrfTokenClient:()=>i.ZP.get("/sanctum/csrf-cookie"),forgotPassword:e=>i.ZP.post("api/users/forgot-password",e),resetPassword:e=>i.ZP.post("api/users/reset-password",e)};var l=o(7439);async function p(e){let t=(await e.json()).force,o=new Headers;if(o.append("Set-Cookie","token=; Path=/; HttpOnly; Max-Age=0"),o.append("Set-Cookie","csrfToken=; Path=/; HttpOnly; Max-Age=0"),o.append("Set-Cookie","id=; Path=/; HttpOnly; Max-Age=0"),t)return Response.json({message:"Buộc đăng xuất th\xe0nh c\xf4ng"},{status:200,headers:o});let r=(0,l.cookies)().get("token");if(!r)return Response.json({message:"Kh\xf4ng nhận được session token"},{status:401});try{let e=await u.logoutFromNextServerToServer(r.value);return Response.json(e.payload,{status:200,headers:o})}catch(e){if(console.log(e),e instanceof i.oo)return Response.json(e.payload,{status:e.status});return Response.json({message:"Lỗi kh\xf4ng x\xe1c định"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/logout/route",pathname:"/api/auth/logout",filename:"route",bundlePath:"app/api/auth/logout/route"},resolvedPagePath:"D:\\lap_trinh\\lms_fe_release\\src\\app\\api\\auth\\logout\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:P,staticGenerationBailout:f}=c,_="/api/auth/logout/route";function m(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},95419:(e,t,o)=>{e.exports=o(30517)},65458:(e,t)=>{function o(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{isGroupSegment:function(){return o},PAGE_SEGMENT_KEY:function(){return r},DEFAULT_SEGMENT_KEY:function(){return s}});let r="__PAGE__",s="__DEFAULT__"},27928:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(82196);let s=r.z.object({NEXT_PUBLIC_COMPANY_NAME:r.z.string(),NEXT_PUBLIC_API_ENDPOINT:r.z.string(),NEXT_PUBLIC_COMPANY_DESCRIPTION:r.z.string()}).safeParse({NEXT_PUBLIC_COMPANY_NAME:"Giao hang GTK",NEXT_PUBLIC_API_ENDPOINT:"http://localhost:8000",NEXT_PUBLIC_COMPANY_DESCRIPTION:"Company Description"});if(!s.success)throw console.error(s.error.issues),Error("C\xe1c gi\xe1 trị khai b\xe1o trong file .env kh\xf4ng hợp lệ");let a=s.data},69304:(e,t,o)=>{o.d(t,{oo:()=>n,ZP:()=>c});var r=o(27928);o(85603),o(23222),o(9327);let s=e=>e.startsWith("/")?e.slice(1):e;var a=o(867);class n extends Error{constructor({status:e,payload:t}){super("Http Error"),this.status=e,this.payload=t}}class i extends n{constructor({status:e,payload:t}){super({status:e,payload:t}),this.status=e,this.payload=t}}let u=()=>!1,l=null,p=async(e,t,o)=>{let p;o?.body instanceof FormData?p=o.body:o?.body&&(p=JSON.stringify(o.body));let c=p instanceof FormData?{}:{"Content-Type":"application/json"};if(u()){let e=localStorage.getItem("token");e&&(c.Authorization=`Bearer ${e}`)}let d=o?.baseUrl===void 0?r.Z.NEXT_PUBLIC_API_ENDPOINT:o.baseUrl,g=t.startsWith("/")?`${d}${t}`:`${d}/${t}`,h=await fetch(g,{...o,headers:{...c,...o?.headers},body:p,method:e}),P=await h.json(),f={status:h.status,payload:P};if(!h.ok){if(422===h.status)throw new i(f);if(401===h.status){if(u()){if(!l){l=fetch("/api/auth/logout",{method:"POST",body:JSON.stringify({force:!0}),headers:{...c}});try{await l}catch(e){}finally{localStorage.removeItem("token"),l=null,location.href="/login"}}}else{let e=o?.headers?.Authorization.split("Bearer ")[1];(0,a.redirect)(`/logout?token=${e}`)}}else if(403===h.status)console.log("Forbidden error"),(0,a.redirect)("/");else throw new n(f)}if(u()){if("api/users/login"===s(t)){let{token:e}=P.data;localStorage.setItem("token",e)}else"api/auth/logout"===s(t)&&localStorage.removeItem("token")}return f},c={get:(e,t)=>p("GET",e,t),post:(e,t,o)=>p("POST",e,{...o,body:t}),put:(e,t,o)=>p("PUT",e,{...o,body:t}),delete:(e,t)=>p("DELETE",e,{...t})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[1638,4595,5742,7439],()=>o(97793));module.exports=r})();