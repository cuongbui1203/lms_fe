(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9429],{73372:function(e,t,r){Promise.resolve().then(r.bind(r,86123)),Promise.resolve().then(r.bind(r,90687))},52697:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});var n=r(89348);let i={getProvince:()=>n.ZP.get("api/address/provinces"),getDistrict:e=>n.ZP.get("api/address/districts?code=".concat(e),{cache:"force-cache"}),getWard:e=>n.ZP.get("api/address/wards?code=".concat(e),{cache:"force-cache"})}},65588:function(e,t,r){"use strict";var n=r(89348);t.Z={login:e=>n.ZP.post("api/users/login",e),register:e=>n.ZP.post("api/users",e),auth:e=>n.ZP.post("api/auth",e,{baseUrl:""}),logoutFromNextServerToServer:e=>n.ZP.delete("api/users/me",{headers:{Authorization:"Bearer ".concat(e)}}),logoutFromNextClientToNextServer:(e,t)=>n.ZP.post("/api/auth/logout",{force:e},{baseUrl:"",signal:t}),updateUserClient:(e,t)=>n.ZP.put("api/users/".concat(t),e),updateEmployee:(e,t)=>n.ZP.put("api/users/".concat(t),e),getCsrfTokenClient:()=>n.ZP.get("/sanctum/csrf-cookie"),forgotPassword:e=>n.ZP.post("api/users/forgot-password",e),resetPassword:e=>n.ZP.post("api/users/reset-password",e)}},27305:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l},useAppContext:function(){return a}});var n=r(57437),i=r(2265);let s=(0,i.createContext)({user:null,setUser:()=>{},isAuthenticated:!1}),a=()=>(0,i.useContext)(s);function l(e){let{children:t}=e,[r,a]=(0,i.useState)(null),l=(0,i.useCallback)(e=>{a(e),localStorage.setItem("user",JSON.stringify(e))},[a]);return(0,i.useEffect)(()=>{let e=localStorage.getItem("user");a(e?JSON.parse(e):null)},[a]),(0,n.jsx)(s.Provider,{value:{user:r,setUser:l,isAuthenticated:!!r},children:t})}},90687:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(57437),i=r(59853),s=r(55914),a=r(80590),l=r(82670),o=r(5054),d=r(21270),c=r(86123),u=r(22169),m=r(56512),Z=r(9092),P=r(27305),p=r(71703),g=r(28389);r(68615);var h=r(65588),b=r(47907),f=r(24167);function j(e){var t,r;let{employee:j,listProvince:v}=e,x=(0,b.useSearchParams)(),{user:_}=(0,P.useAppContext)(),y=(0,b.useRouter)(),w=Number(x.get("fromPage")),{mutate:C}=(0,f.Ei)(w),N=null==_?void 0:null===(t=_.role)||void 0===t?void 0:t.name,{register:k,handleSubmit:O,setError:S,formState:{errors:E,isSubmitting:F},watch:L}=(0,l.cI)({resolver:(0,d.F)(o.Ym),defaultValues:{name:null==j?void 0:j.name,email:null==j?void 0:j.email,phone:(null==j?void 0:j.phone)||"",dob:(0,u.Qe)(null==j?void 0:j.dob),username:null==j?void 0:j.username,address_id:null==j?void 0:j.address.wardCode,role_id:null==j?void 0:j.role.id,wp_id:(null==j?void 0:j.wp_id)||0}});async function T(e){console.log(e);try{await h.Z.updateEmployee(e,j.id),C(),y.push("/dashboard/employee?page=".concat(w)),c.toast.success("Cập nhật nh\xe2n vi\xean th\xe0nh c\xf4ng")}catch(e){(0,u.ZH)({error:e,setError:S})}}let G=L("address_id"),M=e=>m.c.getWorkPlateSuggestClient(e).then(e=>e.payload.data),{data:A,error:I,isLoading:U}=(0,p.Z)(void 0===G||"0"===G?null:"api/work-plates/suggestion-wp?address_id=".concat(G),()=>M(G)),D=A||[];return(void 0===G||"0"===G)&&(D=[]),(0,n.jsx)("div",{className:"formContainer",children:(0,n.jsxs)(i.Z,{onSubmit:O(T,function(e){console.log(e)}),children:[(0,n.jsx)(s.default,{className:"mt-2",children:(0,n.jsx)("h3",{children:"Th\xf4ng tin nh\xe2n vi\xean"})}),(0,n.jsx)(s.default,{className:"mt-2",children:(0,n.jsx)(a.default,{xs:12,md:6,children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{htmlFor:"username",children:"T\xean đăng nhập"}),(0,n.jsx)(i.Z.Control,{type:"text",id:"username",placeholder:"T\xean đăng nhập",...k("username")}),E.username&&(0,n.jsx)(i.Z.Text,{className:"text-danger",children:E.username.message})]})})}),(0,n.jsxs)(s.default,{className:"mt-2",children:[(0,n.jsx)(a.default,{xs:12,md:6,children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{children:"Họ v\xe0 t\xean"}),(0,n.jsx)(i.Z.Control,{type:"text",id:"fullName",placeholder:"Họ v\xe0 t\xean",...k("name")})]})}),(0,n.jsx)(a.default,{xs:12,md:6,children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{htmlFor:"dob",children:"Ng\xe0y sinh"}),(0,n.jsx)(i.Z.Control,{type:"date",id:"dob",...k("dob")})]})})]}),(0,n.jsxs)(s.default,{className:"mt-2",children:[(0,n.jsx)(a.default,{xs:12,md:6,children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{htmlFor:"email",children:"Địa chỉ Email"}),(0,n.jsx)(i.Z.Control,{type:"email",id:"email",placeholder:"Địa chỉ email",...k("email"),required:!0}),E.email&&(0,n.jsx)(i.Z.Text,{className:"text-danger",children:E.email.message})]})}),(0,n.jsx)(a.default,{xs:12,md:6,children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{htmlFor:"phoneNumber",children:"Số điện thoại"}),(0,n.jsx)(i.Z.Control,{type:"tel",id:"phoneNumber",placeholder:"Số điện thoại",...k("phone")})]})})]}),(0,n.jsxs)(s.default,{className:"mt-2",children:[(0,n.jsx)(i.Z.Group,{className:"col-sm-12 col-form-Form.Group",children:"Địa chỉ"}),(0,n.jsx)(g.Z,{listProvince:v,register:k,defaultValues:null==j?void 0:j.address,fieldName:"address_id"})]}),(0,n.jsx)(s.default,{className:"mt-2",children:N&&N===Z.i4.Admin&&(0,n.jsx)(a.default,{children:(0,n.jsxs)(i.Z.Group,{children:[(0,n.jsx)(i.Z.Label,{htmlFor:"role",children:"Vai tr\xf2"}),(0,n.jsxs)("select",{className:"form-select",id:"role",defaultValue:"Chọn vai tr\xf2",...k("role_id",{setValueAs:e=>parseInt(e)}),children:[(0,n.jsx)("option",{disabled:!0,children:"Chọn vai tr\xf2"}),Z.Ik.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]})})}),N&&"Admin"===N&&(0,n.jsx)(s.default,{className:"mt-2",children:(0,n.jsx)(a.default,{children:(0,n.jsxs)(i.Z.Group,{className:"col-sm-12 col-form-Form.Group",children:[(0,n.jsx)(i.Z.Label,{htmlFor:"workplate",children:"Địa điểm l\xe0m việc"}),(0,n.jsxs)("select",{id:"workplate",className:"form-select",value:null==j?void 0:null===(r=j.work_plate)||void 0===r?void 0:r.id,...k("wp_id"),children:[(0,n.jsx)("option",{value:0,disabled:!0,children:"Chọn địa điểm l\xe0m việc"},0),D.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - ",e.address.province,", ",e.address.district,", ",e.address.ward]},e.id))]})]})})}),(0,n.jsx)(s.default,{className:"mt-2",children:(0,n.jsx)("div",{className:"mt-3 btnContainer",children:(0,n.jsx)("button",{className:"btn btnCreate",type:"submit",disabled:F,children:F?"Đang xử l\xfd...":"Cập nhật th\xf4ng tin"})})})]})})}},28389:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(57437),i=r(52697),s=r(2265),a=r(80590),l=r(71703);function o(e){let{listProvince:t,register:r,defaultValues:o,fieldName:d,disabledProvince:c}=e,[u,m]=(0,s.useState)((null==o?void 0:o.provinceCode)||"0"),[Z,P]=(0,s.useState)((null==o?void 0:o.districtCode)||"0"),[p,g]=(0,s.useState)((null==o?void 0:o.wardCode)||"0"),h=e=>i.y.getDistrict(e).then(e=>e.payload.data),b=e=>i.y.getWard(e).then(e=>e.payload.data),{data:f,error:j,isLoading:v}=(0,l.Z)("0"===u?null:"api/address/districts?code=".concat(u),()=>h(u)),{data:x,error:_,isLoading:y}=(0,l.Z)("0"===Z?null:"api/address/wards?code=".concat(Z),()=>b(Z)),w=e=>{m(e.target.value),P("0"),g("0")},C=e=>{P(e.target.value),g("0")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{md:4,children:(0,n.jsxs)("select",{className:"form-select",id:"province",onChange:e=>{w(e)},value:u,disabled:c,children:[(0,n.jsx)("option",{disabled:!0,value:"0",children:"Chọn Tỉnh / TP"},"0"),t.map(e=>(0,n.jsx)("option",{value:e.code,children:e.full_name},e.code))]})}),(0,n.jsx)(a.default,{md:4,children:(0,n.jsxs)("select",{className:"form-select",onChange:e=>{C(e)},value:Z,children:[(0,n.jsx)("option",{disabled:!0,value:"0",children:"Chọn Quận/ Huyện"},"0"),null==f?void 0:f.map(e=>(0,n.jsx)("option",{value:e.code,children:e.full_name},e.code))]})}),(0,n.jsx)(a.default,{md:4,children:(0,n.jsxs)("select",{className:"form-select",value:p,...r(d,{onChange:e=>{g(e.target.value)}}),children:[(0,n.jsx)("option",{disabled:!0,value:"0",children:"Chọn phường x\xe3"},"0"),null==x?void 0:x.map(e=>(0,n.jsx)("option",{value:e.code,children:e.full_name},e.code))]})})]})}},5054:function(e,t,r){"use strict";r.d(t,{$T:function(){return o},CL:function(){return m},CS:function(){return l},UJ:function(){return u},XU:function(){return Z},Xm:function(){return s},Ym:function(){return d},sL:function(){return c},wU:function(){return a}});var n=r(69375),i=r(30248);let s=i.ZP.object({name:i.ZP.string().trim().min(2).max(256),username:i.ZP.string().trim().min(2).max(256),email:i.ZP.string().email(),password:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100),password_confirmation:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100)}).strict().superRefine((e,t)=>{let{password_confirmation:r,password:n}=e;r!==n&&t.addIssue({code:"custom",message:"Mật khẩu kh\xf4ng khớp",path:["password_confirmation"]})}),a=i.ZP.object({username:i.ZP.string(),password:i.ZP.string().min(1,"Mật khẩu phải c\xf3 \xedt nhất 1 k\xed tự.").max(100)}).strict();i.ZP.object({success:i.ZP.boolean(),data:i.ZP.object({user:n.c2,token:i.ZP.string(),csrf_token:i.ZP.string()}),message:i.ZP.string()});let l=i.ZP.object({token:i.ZP.string(),csrf_token:i.ZP.string(),id:i.ZP.number()}),o=i.ZP.object({name:i.ZP.string().trim().min(2).max(256),dob:i.ZP.string(),email:i.ZP.string().email(),phone:i.ZP.string(),address_id:i.ZP.string(),image:i.ZP.string().optional()}),d=i.ZP.object({name:i.ZP.string(),email:i.ZP.string(),phone:i.ZP.string(),dob:i.ZP.string().nullable(),username:i.ZP.string(),address_id:i.ZP.string(),role_id:i.ZP.number(),wp_id:i.ZP.coerce.number(),img_id:i.ZP.string().optional()}),c=i.ZP.object({name:i.ZP.string(),email:i.ZP.string(),password:i.ZP.string(),phone:i.ZP.string(),dob:i.ZP.string().nullable(),username:i.ZP.string(),address_id:i.ZP.string(),role_id:i.ZP.number(),wp_id:i.ZP.string().optional(),img_id:i.ZP.string().optional()});i.ZP.object({success:i.ZP.boolean(),data:n.c2,message:i.ZP.string()}),i.ZP.object({success:i.ZP.boolean(),data:i.ZP.object({total:i.ZP.number(),currentPage:i.ZP.number(),pageSize:i.ZP.number(),data:i.ZP.array(n.c2)}),message:i.ZP.string()});let u=i.ZP.object({old_password:i.ZP.string(),new_password:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100),new_password_confirmation:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100)}).strict().superRefine((e,t)=>{let{new_password_confirmation:r,new_password:n}=e;r!==n&&t.addIssue({code:"custom",message:"Mật khẩu kh\xf4ng khớp",path:["new_password_confirmation"]})}),m=i.ZP.object({email:i.ZP.string().email()}),Z=i.ZP.object({email:i.ZP.string().email(),token:i.ZP.string().optional(),password:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100),password_confirmation:i.ZP.string().min(6,"Mật khẩu phải c\xf3 độ d\xe0i tối thiểu l\xe0 6").max(100)})},69375:function(e,t,r){"use strict";r.d(t,{$5:function(){return d},Kn:function(){return s},c2:function(){return l}});var n=r(30248);n.ZP.object({success:n.ZP.boolean(),message:n.ZP.string()}).strict();let i=n.ZP.object({provinceCode:n.ZP.string(),districtCode:n.ZP.string(),wardCode:n.ZP.string(),province:n.ZP.string(),district:n.ZP.string(),ward:n.ZP.string(),address:n.ZP.string().optional()});n.ZP.object({code:n.ZP.string(),name:n.ZP.string(),name_en:n.ZP.string(),full_name:n.ZP.string(),full_name_en:n.ZP.string(),code_name:n.ZP.string()});let s=n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),address_id:n.ZP.string(),type_id:n.ZP.number(),cap:n.ZP.number(),created_at:n.ZP.string(),updated_at:n.ZP.string(),address:i,manager:n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),address:n.ZP.string().nullable()}),type:n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),for:n.ZP.number()}),detail:n.ZP.null()}),a=n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),desc:n.ZP.string(),created_at:n.ZP.string(),updated_at:n.ZP.string()}),l=n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),email:n.ZP.string(),email_verified_at:n.ZP.string().nullable(),created_at:n.ZP.number().nullable(),updated_at:n.ZP.number().nullable(),phone:n.ZP.string().nullable(),dob:n.ZP.date().nullable(),username:n.ZP.string(),address:i,role_id:n.ZP.number(),wp_id:n.ZP.number().nullable(),img_id:n.ZP.string().nullable(),role:a,work_plate:s.nullable(),img:n.ZP.string().nullable()}),o=n.ZP.object({id:n.ZP.number(),created_at:n.ZP.string(),updated_at:n.ZP.string(),order_id:n.ZP.number(),name:n.ZP.string(),mass:n.ZP.number(),desc:n.ZP.string(),image_link:n.ZP.string().nullable()}),d=n.ZP.object({id:n.ZP.number(),sender_name:n.ZP.string(),sender_phone:n.ZP.string(),receiver_name:n.ZP.string(),receiver_phone:n.ZP.string(),created_at:n.ZP.number(),updated_at:n.ZP.number(),vehicle_id:n.ZP.number().nullable(),type_id:n.ZP.number(),status_id:n.ZP.number(),mass:n.ZP.number(),sender_address:i,receiver_address:i,type:n.ZP.object({id:n.ZP.number(),name:n.ZP.string(),for:n.ZP.number().optional()}),notifications:n.ZP.array(n.ZP.object({id:n.ZP.number(),order_id:n.ZP.number(),from_id:n.ZP.number(),to_id:n.ZP.number(),status_id:n.ZP.number(),description:n.ZP.string(),created_at:n.ZP.string(),updated_at:n.ZP.string(),from_address:i,to_address:i})),details:n.ZP.array(o),created_by:n.ZP.object({id:n.ZP.number(),name:n.ZP.string()})});n.ZP.object({success:n.ZP.boolean(),data:n.ZP.object({total:n.ZP.number()})})},68615:function(){},70158:function(e,t,r){"use strict";r.d(t,{w_:function(){return c}});var n=r(2265),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(i),a=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return t=>n.createElement(u,l({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,d({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:i,size:s,title:o}=e,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,a),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:r,style:d(d({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>t(e)):t(i)}}},function(e){e.O(0,[6990,9212,6051,1779,5706,2516,6305,248,6123,4838,4898,1252,571,1703,4167,2971,8069,1744],function(){return e(e.s=73372)}),_N_E=e.O()}]);