(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{81587:function(e,s,t){Promise.resolve().then(t.bind(t,22479))},22479:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var r=t(57437),a=t(71709),n=t(71399),l=t(8792),i=t(59853),c=t(55914),d=t(73537),u=t(66879),o=t(80590),h=t(82670),x=t(5054),f=t(21270),m=t(65588),j=t(47907),p=t(74234),g=t(86123),b=t(22169),N=t(27305),Z=t(2265);function k(){let e=(0,j.useRouter)(),{register:s,handleSubmit:t,setError:k,formState:{errors:w,isSubmitting:C}}=(0,h.cI)({resolver:(0,f.F)(x.wU)});(0,Z.useEffect)(()=>{localStorage.clear()},[]);let{setUser:S}=(0,N.useAppContext)();async function y(s){try{let t=(await m.Z.login(s)).payload.data,r=x.CS.parse({token:t.token,csrf_token:t.csrf_token,id:t.user.id});if(await m.Z.auth(r),g.toast.success("Đăng nhập th\xe0nh c\xf4ng"),S(t.user),"User"===t.user.role.name){e.push(p.DP);return}e.push(p.SO)}catch(e){(0,b.ZH)({error:e,setError:k,message:"Đăng nhập thất bại!"})}}return(0,r.jsxs)(i.Z,{onSubmit:t(y,function(e){console.log(e)}),children:[(0,r.jsx)(c.default,{className:"text-center text-light",children:(0,r.jsx)("h3",{children:"ĐĂNG NHẬP"})}),(0,r.jsx)(c.default,{children:(0,r.jsxs)(i.Z.Group,{className:"mb-3",children:[(0,r.jsx)(i.Z.Label,{htmlFor:"username",className:"text-light",children:"T\xe0i khoản"}),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(d.Z.Text,{id:"basic-addon1",children:(0,r.jsx)(n.BKo,{})}),(0,r.jsx)(i.Z.Control,{id:"username",placeholder:"T\xe0i khoản","aria-label":"Username","aria-describedby":"basic-addon1",...s("username")})]}),w.username&&(0,r.jsx)(i.Z.Text,{className:"text-danger",children:w.username.message})]})}),(0,r.jsx)(c.default,{children:(0,r.jsxs)(i.Z.Group,{className:"mb-3",children:[(0,r.jsx)(i.Z.Label,{htmlFor:"password",className:"text-light",children:"Mật khẩu"}),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(d.Z.Text,{id:"basic-addon1",children:(0,r.jsx)(a.oAM,{})}),(0,r.jsx)(i.Z.Control,{id:"password",placeholder:"Mật khẩu","aria-label":"Password",type:"password","aria-describedby":"basic-addon1",required:!0,...s("password")})]}),w.password&&(0,r.jsx)(i.Z.Text,{className:"text-danger",children:w.password.message})]})}),(0,r.jsxs)(c.default,{className:"m-1",children:[(0,r.jsx)(u.Z,{variant:"primary",size:"lg",className:"login-btn",type:"submit",disabled:C,children:C?"Đang xử l\xfd...":"Đăng nhập"}),w.root&&(0,r.jsx)(i.Z.Text,{className:"text-danger",children:w.root.message})]}),(0,r.jsx)(c.default,{}),(0,r.jsxs)(c.default,{className:"m-1 text-center",children:[(0,r.jsx)(o.default,{children:(0,r.jsx)(l.default,{href:"/forgot-password",children:"Qu\xean mật khẩu?"})}),(0,r.jsx)(o.default,{children:(0,r.jsx)(l.default,{href:"/register",children:"Đăng k\xed t\xe0i khoản mới."})})]})]})}},27305:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i},useAppContext:function(){return l}});var r=t(57437),a=t(2265);let n=(0,a.createContext)({user:null,setUser:()=>{},isAuthenticated:!1}),l=()=>(0,a.useContext)(n);function i(e){let{children:s}=e,[t,l]=(0,a.useState)(null),i=(0,a.useCallback)(e=>{l(e),localStorage.setItem("user",JSON.stringify(e))},[l]);return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");l(e?JSON.parse(e):null)},[l]),(0,r.jsx)(n.Provider,{value:{user:t,setUser:i,isAuthenticated:!!t},children:s})}}},function(e){e.O(0,[6990,9212,7699,248,6123,4838,5284,571,7225,2971,8069,1744],function(){return e(e.s=81587)}),_N_E=e.O()}]);