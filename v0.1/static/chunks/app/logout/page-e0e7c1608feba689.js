(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5805],{13051:function(t,e,r){Promise.resolve().then(r.bind(r,87392))},89539:function(t){var e,r,n,s,a,i,u,o,c,l,f,h,d,g,p,$,m,y,v,D,M,S;t.exports=(e="millisecond",r="second",n="minute",s="hour",a="week",i="month",u="quarter",o="year",c="date",l="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},(p={})[g="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||"th")+"]"}},$="$isDayjsObject",m=function(t){return t instanceof M||!(!t||!t[$])},y=function t(e,r,n){var s;if(!e)return g;if("string"==typeof e){var a=e.toLowerCase();p[a]&&(s=a),r&&(p[a]=r,s=a);var i=e.split("-");if(!s&&i.length>1)return t(i[0])}else{var u=e.name;p[u]=e,s=u}return!n&&s&&(g=s),s||!n&&g},v=function(t,e){if(m(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new M(r)},(D={s:d,z:function(t){var e=-t.utcOffset(),r=Math.abs(e);return(e<=0?"+":"-")+d(Math.floor(r/60),2,"0")+":"+d(r%60,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),s=e.clone().add(n,i),a=r-s<0,u=e.clone().add(n+(a?-1:1),i);return+(-(n+(r-s)/(a?s-u:u-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return({M:i,y:o,w:a,d:"day",D:c,h:s,m:n,s:r,ms:e,Q:u})[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}}).l=y,D.i=m,D.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},S=(M=function(){function t(t){this.$L=y(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[$]=!0}var d=t.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(f);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(e)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return this.$d.toString()!==l},d.isSame=function(t,e){var r=v(t);return this.startOf(e)<=r&&r<=this.endOf(e)},d.isAfter=function(t,e){return v(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<v(t)},d.$g=function(t,e,r){return D.u(t)?this[e]:this.set(r,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,e){var u=this,l=!!D.u(e)||e,f=D.p(t),h=function(t,e){var r=D.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return l?r:r.endOf("day")},d=function(t,e){return D.w(u.toDate()[t].apply(u.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},g=this.$W,p=this.$M,$=this.$D,m="set"+(this.$u?"UTC":"");switch(f){case o:return l?h(1,0):h(31,11);case i:return l?h(1,p):h(0,p+1);case a:var y=this.$locale().weekStart||0,v=(g<y?g+7:g)-y;return h(l?$-v:$+(6-v),p);case"day":case c:return d(m+"Hours",0);case s:return d(m+"Minutes",1);case n:return d(m+"Seconds",2);case r:return d(m+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(t,a){var u,l=D.p(t),f="set"+(this.$u?"UTC":""),h=((u={}).day=f+"Date",u[c]=f+"Date",u[i]=f+"Month",u[o]=f+"FullYear",u[s]=f+"Hours",u[n]=f+"Minutes",u[r]=f+"Seconds",u[e]=f+"Milliseconds",u)[l],d="day"===l?this.$D+(a-this.$W):a;if(l===i||l===o){var g=this.clone().set(c,1);g.$d[h](d),g.init(),this.$d=g.set(c,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](d);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,e){var u,c=this;t=Number(t);var l=D.p(e),f=function(e){var r=v(c);return D.w(r.date(r.date()+Math.round(e*t)),c)};if(l===i)return this.set(i,this.$M+t);if(l===o)return this.set(o,this.$y+t);if("day"===l)return f(1);if(l===a)return f(7);var h=((u={})[n]=6e4,u[s]=36e5,u[r]=1e3,u)[l]||1,d=this.$d.getTime()+t*h;return D.w(d,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||l;var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=D.z(this),a=this.$H,i=this.$m,u=this.$M,o=r.weekdays,c=r.months,f=r.meridiem,d=function(t,r,s,a){return t&&(t[r]||t(e,n))||s[r].slice(0,a)},g=function(t){return D.s(a%12||12,t,"0")},p=f||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(h,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return D.s(e.$y,4,"0");case"M":return u+1;case"MM":return D.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,c,3);case"MMMM":return d(c,u);case"D":return e.$D;case"DD":return D.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return d(r.weekdaysMin,e.$W,o,2);case"ddd":return d(r.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(a);case"HH":return D.s(a,2,"0");case"h":return g(1);case"hh":return g(2);case"a":return p(a,i,!0);case"A":return p(a,i,!1);case"m":return String(i);case"mm":return D.s(i,2,"0");case"s":return String(e.$s);case"ss":return D.s(e.$s,2,"0");case"SSS":return D.s(e.$ms,3,"0");case"Z":return s}return null}(t)||s.replace(":","")})},d.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},d.diff=function(t,e,c){var l,f=this,h=D.p(e),d=v(t),g=(d.utcOffset()-this.utcOffset())*6e4,p=this-d,$=function(){return D.m(f,d)};switch(h){case o:l=$()/12;break;case i:l=$();break;case u:l=$()/3;break;case a:l=(p-g)/6048e5;break;case"day":l=(p-g)/864e5;break;case s:l=p/36e5;break;case n:l=p/6e4;break;case r:l=p/1e3;break;default:l=p}return c?l:D.a(l)},d.daysInMonth=function(){return this.endOf(i).$D},d.$locale=function(){return p[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=y(t,e,!0);return n&&(r.$L=n),r},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},t}()).prototype,v.prototype=S,[["$ms",e],["$s",r],["$m",n],["$H",s],["$W","day"],["$M",i],["$y",o],["$D",c]].forEach(function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t.$i||(t(e,M,v),t.$i=!0),v},v.locale=y,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=p[g],v.Ls=p,v.p={},v)},47907:function(t,e,r){"use strict";var n=r(15313);r.o(n,"redirect")&&r.d(e,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(e,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(e,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(e,{useSearchParams:function(){return n.useSearchParams}})},65588:function(t,e,r){"use strict";var n=r(89348);e.Z={login:t=>n.ZP.post("api/users/login",t),register:t=>n.ZP.post("api/users",t),auth:t=>n.ZP.post("api/auth",t,{baseUrl:""}),logoutFromNextServerToServer:t=>n.ZP.delete("api/users/me",{headers:{Authorization:"Bearer ".concat(t)}}),logoutFromNextClientToNextServer:(t,e)=>n.ZP.post("/api/auth/logout",{force:t},{baseUrl:"",signal:e}),updateUserClient:(t,e)=>n.ZP.put("api/users/".concat(e),t),updateEmployee:(t,e)=>n.ZP.put("api/users/".concat(e),t),getCsrfTokenClient:()=>n.ZP.get("/sanctum/csrf-cookie"),forgotPassword:t=>n.ZP.post("api/users/forgot-password",t),resetPassword:t=>n.ZP.post("api/users/reset-password",t)}},27305:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u},useAppContext:function(){return i}});var n=r(57437),s=r(2265);let a=(0,s.createContext)({user:null,setUser:()=>{},isAuthenticated:!1}),i=()=>(0,s.useContext)(a);function u(t){let{children:e}=t,[r,i]=(0,s.useState)(null),u=(0,s.useCallback)(t=>{i(t),localStorage.setItem("user",JSON.stringify(t))},[i]);return(0,s.useEffect)(()=>{let t=localStorage.getItem("user");i(t?JSON.parse(t):null)},[i]),(0,n.jsx)(a.Provider,{value:{user:r,setUser:u,isAuthenticated:!!r},children:e})}},87392:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return c}});var n=r(57437),s=r(65588),a=r(27305),i=r(47907),u=r(2265);function o(){let t=(0,i.useRouter)(),e=(0,i.usePathname)(),{setUser:r}=(0,a.useAppContext)(),o=(0,i.useSearchParams)().get("token");return(0,u.useEffect)(()=>{let n=new AbortController,a=n.signal;return o===localStorage.getItem("token")&&s.Z.logoutFromNextClientToNextServer(!0,a).then(n=>{r(null),t.push("/login?redirectFrom=".concat(e))}),()=>{n.abort()}},[o,t,e,r]),(0,n.jsx)("div",{children:"page"})}function c(){return(0,n.jsx)(u.Suspense,{children:(0,n.jsx)(o,{})})}},2261:function(t,e,r){"use strict";var n=r(30248);let s=n.z.object({NEXT_PUBLIC_COMPANY_NAME:n.z.string(),NEXT_PUBLIC_API_ENDPOINT:n.z.string(),NEXT_PUBLIC_COMPANY_DESCRIPTION:n.z.string()}).safeParse({NEXT_PUBLIC_COMPANY_NAME:"Giao hang GTK",NEXT_PUBLIC_API_ENDPOINT:"http://localhost:8000",NEXT_PUBLIC_COMPANY_DESCRIPTION:"Company Description"});if(!s.success)throw console.error(s.error.issues),Error("C\xe1c gi\xe1 trị khai b\xe1o trong file .env kh\xf4ng hợp lệ");let a=s.data;e.Z=a},89348:function(t,e,r){"use strict";r.d(e,{Xs:function(){return o}});var n=r(2261),s=r(22169),a=r(47907),i=r(86123);class u extends Error{constructor({status:t,payload:e}){super("Http Error"),this.status=t,this.payload=e}}class o extends u{constructor({status:t,payload:e}){super({status:t,payload:e}),this.status=t,this.payload=e}}let c=()=>!0,l=null,f=async(t,e,r)=>{let f;(null==r?void 0:r.body)instanceof FormData?f=r.body:(null==r?void 0:r.body)&&(f=JSON.stringify(r.body));let h=f instanceof FormData?{}:{"Content-Type":"application/json"};if(c()){let t=localStorage.getItem("token");t&&(h.Authorization="Bearer ".concat(t))}let d=(null==r?void 0:r.baseUrl)===void 0?n.Z.NEXT_PUBLIC_API_ENDPOINT:r.baseUrl,g=e.startsWith("/")?"".concat(d).concat(e):"".concat(d,"/").concat(e),p=await fetch(g,{...r,headers:{...h,...null==r?void 0:r.headers},body:f,method:t}),$=await p.json(),m={status:p.status,payload:$};if(!p.ok){if(422===p.status)throw new o(m);if(401===p.status){if(c()){if(!l){l=fetch("/api/auth/logout",{method:"POST",body:JSON.stringify({force:!0}),headers:{...h}});try{await l}catch(t){}finally{localStorage.removeItem("token"),l=null,location.href="/login"}}}else{var y;let t=null==r?void 0:null===(y=r.headers)||void 0===y?void 0:y.Authorization.split("Bearer ")[1];(0,a.redirect)("/logout?token=".concat(t))}}else if(403===p.status)console.log("Forbidden error"),location.href="/",i.toast.error("Kh\xf4ng c\xf3 quyền truy cập");else throw new u(m)}if(c()){if("api/users/login"===(0,s.AH)(e)){let{token:t}=$.data;localStorage.setItem("token",t)}else"api/auth/logout"===(0,s.AH)(e)&&localStorage.removeItem("token")}return m};e.ZP={get:(t,e)=>f("GET",t,e),post:(t,e,r)=>f("POST",t,{...r,body:e}),put:(t,e,r)=>f("PUT",t,{...r,body:e}),delete:(t,e)=>f("DELETE",t,{...e})}},22169:function(t,e,r){"use strict";r.d(e,{AH:function(){return f},Ft:function(){return p},Qe:function(){return d},Xc:function(){return $},ZH:function(){return h},jg:function(){return l},o0:function(){return g},p6:function(){return c}});var n=r(42151),s=r.n(n),a=r(89348),i=r(86123),u=r(89539),o=r.n(u);function c(t){return new Date(s()(t).format("YYYY-MM-DD").replace(/-/g,""))}let l=(t,e)=>e<=7?Array.from({length:e},(t,e)=>e+1):t<=3?[1,2,3,"...",e-1,e]:t>=e-2?[1,2,"...",e-2,e-1,e]:[1,"...",t-1,t,t+1,"...",e],f=t=>t.startsWith("/")?t.slice(1):t,h=t=>{let{error:e,setError:r,message:n,duration:s}=t;e instanceof a.Xs&&r?e.payload.error.forEach(t=>{r(t.field,{type:"manual",message:t.message[0]})}):i.toast.error(n||e.payload.message||"Y\xeau cầu thất bại!",{autoClose:s||3e3})},d=t=>t?o()(t).format("YYYY-MM-DD"):"",g=t=>t?o()(t).format("HH:mm DD-MM-YYYY"):"";function p(t){let e=new Date(1e3*t);return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear())}function $(t){let e=new Date(1e3*t);return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," ").concat(e.getHours(),":").concat(e.getMinutes())}}},function(t){t.O(0,[6990,248,6123,2971,8069,1744],function(){return t(t.s=13051)}),_N_E=t.O()}]);