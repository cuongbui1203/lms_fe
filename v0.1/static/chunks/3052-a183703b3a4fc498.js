(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3052],{13052:function(e,n,a){Promise.resolve().then(a.bind(a,86123)),Promise.resolve().then(a.bind(a,53236))},56512:function(e,n,a){"use strict";a.d(n,{c:function(){return i}});var t=a(46701),r=a(89348);let i={getWorkPlateClient:(e,n)=>r.ZP.get("api/work-plates?pageSize=".concat(t.ud,"&&page=").concat(e,"&&type_id=").concat(n)),getWorkPlate:e=>r.ZP.get("api/work-plates",{headers:{Authorization:"Bearer ".concat(e)}}),getWorkPlateSuggestClient:e=>r.ZP.get("api/work-plates/suggestion-wp?address_id=".concat(e)),createWP:e=>r.ZP.post("api/work-plates",e),getDetailWorkPlate:(e,n)=>r.ZP.get("api/work-plates/".concat(n),{headers:{Authorization:"Bearer ".concat(e)}}),updateWP:(e,n)=>r.ZP.put("api/work-plates/".concat(e),n),deleteWP:e=>r.ZP.delete("api/work-plates/".concat(e))}},53236:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return y}});var t=a(57437),r=a(56512),i=a(27305),o=a(28389),s=a(9092),c=a(22169),l=a(30027),d=a(21270),u=a(47907),h=a(59853),m=a(55914),g=a(80590),p=a(66879),f=a(82670),T=a(86123);function y(e){var n;let{listProvince:a,type:y}=e,N=(0,u.useRouter)(),{user:v}=(0,i.useAppContext)(),b=null==v?void 0:null===(n=v.role)||void 0===n?void 0:n.name,{register:P,handleSubmit:x,setError:E,formState:{errors:j,isSubmitting:O}}=(0,f.cI)({resolver:(0,d.F)(l.QR)});if(b!==s.i4.Admin)return(0,t.jsx)("div",{children:"403"});async function _(e){e.type_id=y;try{await r.c.createWP(e).then(e=>{e.payload.success&&(y===s.qw.Transaction?(T.toast.success("Tạo điểm giao dịch th\xe0nh c\xf4ng"),N.push("/dashboard/transaction?created=true")):(T.toast.success("Tạo điểm trung chuyển th\xe0nh c\xf4ng"),N.push("/dashboard/transshipment?created=true")))})}catch(e){(0,c.ZH)({error:e,setError:E})}}return(0,t.jsx)("div",{className:"formContainer",children:(0,t.jsxs)(h.Z,{onSubmit:x(_),children:[(0,t.jsx)(m.default,{className:"mt-2",children:(0,t.jsx)("h3",{children:y===s.qw.Transaction?"Th\xf4ng tin điểm giao dịch":"Th\xf4ng tin điểm trung chuyển"})}),(0,t.jsx)(m.default,{className:"mt-2",children:(0,t.jsx)(g.default,{xs:12,md:6,children:(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{htmlFor:"username",children:y===s.qw.Transaction?"T\xean điểm giao dịch":"T\xean điểm trung chuyển"}),(0,t.jsx)(h.Z.Control,{type:"text",id:"username",placeholder:"T\xean điểm giao dịch / trung chuyển",...P("name")})]})})}),(0,t.jsxs)(m.default,{className:"mt-2",children:[(0,t.jsx)(h.Z.Group,{className:"col-sm-12 col-form-Form.Group",children:"Địa chỉ"}),(0,t.jsx)(o.Z,{listProvince:a,register:P,fieldName:"address_id"}),(0,t.jsx)(h.Z.Group,{className:"mt-2",children:(0,t.jsx)(h.Z.Control,{type:"text",id:"address",placeholder:"Địa điểm cụ thể",...P("address")})})]}),(0,t.jsx)(m.default,{className:"mt-2",children:(0,t.jsx)(g.default,{xs:12,md:6,children:(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{htmlFor:"area",children:"Khu vực quản l\xfd"}),(0,t.jsxs)("select",{id:"area",className:"form-select",defaultValue:"Chọn khu vực",...P("cap"),children:[(0,t.jsx)("option",{disabled:!0,children:"Chọn khu vực quản l\xfd"},0),s.uN.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})})}),(0,t.jsx)(m.default,{className:"mt-2",children:(0,t.jsx)("div",{className:"mt-3 btnContainer",children:(0,t.jsx)(p.Z,{className:"btn btnCreate",type:"submit",disabled:O,children:O?"Đang xử l\xfd...":y===s.qw.Transaction?"Tạo điểm giao dịch":"Tạo điểm trung chuyển"})})})]})})}},9092:function(e,n,a){"use strict";a.d(n,{CJ:function(){return v},DR:function(){return y},Ik:function(){return m},ZJ:function(){return r},i4:function(){return h},iF:function(){return N},ix:function(){return f},qw:function(){return T},uN:function(){return p},uU:function(){return g}});var t,r,i=a(57437),o=a(70784),s=a(52840),c=a(71709),l=a(56733),d=a(57252),u=a(61975);let h={Admin:"Admin",User:"User",Driver:"Driver",Employee:"Employee",Manager:"Manager",Shipper:"Shipper"},m=[{id:1,name:"Admin"},{id:3,name:"Driver"},{id:4,name:"Employee"},{id:5,name:"Manager"},{id:6,name:"Shipper"}],g={Admin:{id:1,name:"Quản trị vi\xean",tabs:["dashboard","manageTransshipment","manageTransactions","manageEmployees"]},Manager:{id:5,name:"Quản l\xed",tabs:["dashboard","manageEmployees","manageWaitingOrders","manageReceivingOrders","historyOrders","createOrder"]},Driver:{id:3,name:"T\xe0i xế",tabs:["dashboard","leavingOrders"]},Employee:{id:4,name:"Nh\xe2n vi\xean",tabs:["dashboard","createOrder","manageWaitingOrders","manageReceivingOrders","historyOrders"]},Shipper:{id:6,name:"Shipper",tabs:["dashboard","manageOrders"]}},p=[{id:1,name:"Tỉnh / Th\xe0nh phố"},{id:2,name:"Quận / Huyện"},{id:3,name:"Phường / X\xe3"}],f={dashboard:{url:"/dashboard",name:"Trang ch\xednh",icon:(0,i.jsx)(o.JZ9,{size:"2em"})},information:{url:"/dashboard/information",name:"Th\xf4ng tin",icon:(0,i.jsx)(o.JZ9,{size:"2em"})},manageEmployees:{url:"/dashboard/employee",name:"Nh\xe2n vi\xean",icon:(0,i.jsx)(s.Jwp,{size:"2em"})},detailEmployee:{url:"/dashboard/employee/[id]/detail",name:"Th\xf4ng tin nh\xe2n vi\xean",icon:(0,i.jsx)(l.zJl,{size:"2em"})},createEmployee:{url:"/dashboard/employee/create",name:"Tạo t\xe0i khoản nh\xe2n vi\xean",icon:(0,i.jsx)(l.zJl,{size:"2em"})},manageTransshipment:{url:"/dashboard/transshipment",name:"Điểm trung chuyển",icon:(0,i.jsx)(o.X3C,{size:"2em"})},createTransshipment:{url:"/dashboard/transshipment/create",name:"Tạo điểm trung chuyển",icon:(0,i.jsx)(l.zJl,{size:"2em"})},detailTransshipment:{url:"/dashboard/transshipment/[id]/detail",name:"Chi tiết điểm trung chuyển",icon:(0,i.jsx)(l.zJl,{size:"2em"})},manageTransactions:{url:"/dashboard/transaction",name:"Điểm giao dịch",icon:(0,i.jsx)(u.la$,{size:"2em"})},createTransaction:{url:"/dashboard/transaction/create",name:"Tạo điểm giao dịch",icon:(0,i.jsx)(l.zJl,{size:"2em"})},detailTransaction:{url:"/dashboard/transaction/[id]/detail",name:"Chi tiết điểm giao dịch",icon:(0,i.jsx)(l.zJl,{size:"2em"})},manageWaitingOrders:{url:"/dashboard/ordered/waiting",name:"H\xe0ng chờ gửi",icon:(0,i.jsx)(d.HwV,{size:"2em"})},manageReceivingOrders:{url:"/dashboard/ordered/receiving",name:"H\xe0ng chờ nhận",icon:(0,i.jsx)(d.cFG,{size:"2em"})},historyOrders:{url:"/dashboard/ordered/history",name:"Lịch sử đơn h\xe0ng",icon:(0,i.jsx)(c.Nt_,{size:"2em"})},leavingOrders:{url:"/dashboard/ordered/leave",name:"H\xe0ng chờ chuyển đi",icon:(0,i.jsx)(d.HwV,{size:"2em"})},detailOrder:{url:"/dashboard/ordered/[id]/detail",name:"Chi tiết đơn h\xe0ng",icon:(0,i.jsx)(l.zJl,{size:"2em"})},manageOrders:{url:"/dashboard/ordered",name:"Đơn h\xe0ng",icon:(0,i.jsx)(c.bhi,{size:"2em"})},createOrder:{url:"/dashboard/ordered/create",name:"Tạo đơn h\xe0ng",icon:(0,i.jsx)(c.qS3,{size:"2em"})}},T={Warehouse:1,Transaction:2,Transshipment:3},y={WAIT_F_DELIVERY:1,R_DELIVERY:2,DONE:3,LEAVE_TRANSPORT_POINT:4,AT_TRANSPORT_POINT:5,AT_TRANSACTION_POINT:13,LEAVE_TRANSACTION_POINT:14,SHIPPING:6,TO_THE_TRANSPORT_POINT:7,TO_THE_TRANSACTION_POINT:8,RETURN:9,CREATE:10,COMPLETE:11,FAIL:12},N={1:{name:"Chờ gửi",color:"warning"},2:{name:"Đang vận chuyển",color:"info"},3:{name:"Ho\xe0n th\xe0nh",color:"success"},4:{name:"Rời đi điểm trung chuyển",color:"info"},5:{name:"Tại điểm trung chuyển",color:"info"},13:{name:"Tại điểm giao dịch",color:"info"},14:{name:"Rời đi điểm giao dịch",color:"info"},6:{name:"Đang vận chuyển",color:"info"},7:{name:"Đến điểm trung chuyển",color:"info"},8:{name:"Đến điểm giao dịch",color:"info"},9:{name:"Ho\xe0n trả",color:"info"},10:{name:"Tạo mới",color:"primary"},11:{name:"Ho\xe0n th\xe0nh",color:"success"},12:{name:"Thất bại",color:"danger"}},v={NORMAL:{name:"B\xecnh thường",value:10},fragile:{name:"Dễ vỡ",value:9},oversized:{name:"Qu\xe1 khổ",value:11},hazardous:{name:"Nguy hiểm",value:12}};(t=r||(r={})).Waiting="waiting",t.Receiving="receiving",t.History="history",t.Leave="leave",t.All="all"},46701:function(e,n,a){"use strict";a.d(n,{Ii:function(){return t},LL:function(){return i},ud:function(){return r}});let t=5,r=10,i=10},2261:function(e,n,a){"use strict";var t=a(30248);let r=t.z.object({NEXT_PUBLIC_COMPANY_NAME:t.z.string(),NEXT_PUBLIC_API_ENDPOINT:t.z.string(),NEXT_PUBLIC_COMPANY_DESCRIPTION:t.z.string()}).safeParse({NEXT_PUBLIC_COMPANY_NAME:"Giao hang GTK",NEXT_PUBLIC_API_ENDPOINT:"http://localhost:8000",NEXT_PUBLIC_COMPANY_DESCRIPTION:"Company Description"});if(!r.success)throw console.error(r.error.issues),Error("C\xe1c gi\xe1 trị khai b\xe1o trong file .env kh\xf4ng hợp lệ");let i=r.data;n.Z=i},89348:function(e,n,a){"use strict";a.d(n,{Xs:function(){return c}});var t=a(2261),r=a(22169),i=a(47907),o=a(86123);class s extends Error{constructor({status:e,payload:n}){super("Http Error"),this.status=e,this.payload=n}}class c extends s{constructor({status:e,payload:n}){super({status:e,payload:n}),this.status=e,this.payload=n}}let l=()=>!0,d=null,u=async(e,n,a)=>{let u;(null==a?void 0:a.body)instanceof FormData?u=a.body:(null==a?void 0:a.body)&&(u=JSON.stringify(a.body));let h=u instanceof FormData?{}:{"Content-Type":"application/json"};if(l()){let e=localStorage.getItem("token");e&&(h.Authorization="Bearer ".concat(e))}let m=(null==a?void 0:a.baseUrl)===void 0?t.Z.NEXT_PUBLIC_API_ENDPOINT:a.baseUrl,g=n.startsWith("/")?"".concat(m).concat(n):"".concat(m,"/").concat(n),p=await fetch(g,{...a,headers:{...h,...null==a?void 0:a.headers},body:u,method:e}),f=await p.json(),T={status:p.status,payload:f};if(!p.ok){if(422===p.status)throw new c(T);if(401===p.status){if(l()){if(!d){d=fetch("/api/auth/logout",{method:"POST",body:JSON.stringify({force:!0}),headers:{...h}});try{await d}catch(e){}finally{localStorage.removeItem("token"),d=null,location.href="/login"}}}else{var y;let e=null==a?void 0:null===(y=a.headers)||void 0===y?void 0:y.Authorization.split("Bearer ")[1];(0,i.redirect)("/logout?token=".concat(e))}}else if(403===p.status)console.log("Forbidden error"),location.href="/",o.toast.error("Kh\xf4ng c\xf3 quyền truy cập");else throw new s(T)}if(l()){if("api/users/login"===(0,r.AH)(n)){let{token:e}=f.data;localStorage.setItem("token",e)}else"api/auth/logout"===(0,r.AH)(n)&&localStorage.removeItem("token")}return T};n.ZP={get:(e,n)=>u("GET",e,n),post:(e,n,a)=>u("POST",e,{...a,body:n}),put:(e,n,a)=>u("PUT",e,{...a,body:n}),delete:(e,n)=>u("DELETE",e,{...n})}},22169:function(e,n,a){"use strict";a.d(n,{AH:function(){return u},Ft:function(){return p},Qe:function(){return m},Xc:function(){return f},ZH:function(){return h},jg:function(){return d},o0:function(){return g},p6:function(){return l}});var t=a(42151),r=a.n(t),i=a(89348),o=a(86123),s=a(89539),c=a.n(s);function l(e){return new Date(r()(e).format("YYYY-MM-DD").replace(/-/g,""))}let d=(e,n)=>n<=7?Array.from({length:n},(e,n)=>n+1):e<=3?[1,2,3,"...",n-1,n]:e>=n-2?[1,2,"...",n-2,n-1,n]:[1,"...",e-1,e,e+1,"...",n],u=e=>e.startsWith("/")?e.slice(1):e,h=e=>{let{error:n,setError:a,message:t,duration:r}=e;n instanceof i.Xs&&a?n.payload.error.forEach(e=>{a(e.field,{type:"manual",message:e.message[0]})}):o.toast.error(t||n.payload.message||"Y\xeau cầu thất bại!",{autoClose:r||3e3})},m=e=>e?c()(e).format("YYYY-MM-DD"):"",g=e=>e?c()(e).format("HH:mm DD-MM-YYYY"):"";function p(e){let n=new Date(1e3*e);return"".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear())}function f(e){let n=new Date(1e3*e);return"".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()," ").concat(n.getHours(),":").concat(n.getMinutes())}}}]);