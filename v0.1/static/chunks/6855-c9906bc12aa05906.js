(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6855],{65588:function(e,t,n){"use strict";var r=n(89348);t.Z={login:e=>r.ZP.post("api/users/login",e),register:e=>r.ZP.post("api/users",e),auth:e=>r.ZP.post("api/auth",e,{baseUrl:""}),logoutFromNextServerToServer:e=>r.ZP.delete("api/users/me",{headers:{Authorization:"Bearer ".concat(e)}}),logoutFromNextClientToNextServer:(e,t)=>r.ZP.post("/api/auth/logout",{force:e},{baseUrl:"",signal:t}),updateUserClient:(e,t)=>r.ZP.put("api/users/".concat(t),e),updateEmployee:(e,t)=>r.ZP.put("api/users/".concat(t),e),getCsrfTokenClient:()=>r.ZP.get("/sanctum/csrf-cookie"),forgotPassword:e=>r.ZP.post("api/users/forgot-password",e),resetPassword:e=>r.ZP.post("api/users/reset-password",e)}},27305:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i},useAppContext:function(){return s}});var r=n(57437),a=n(2265);let o=(0,a.createContext)({user:null,setUser:()=>{},isAuthenticated:!1}),s=()=>(0,a.useContext)(o);function i(e){let{children:t}=e,[n,s]=(0,a.useState)(null),i=(0,a.useCallback)(e=>{s(e),localStorage.setItem("user",JSON.stringify(e))},[s]);return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");s(e?JSON.parse(e):null)},[s]),(0,r.jsx)(o.Provider,{value:{user:n,setUser:i,isAuthenticated:!!n},children:t})}},8602:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(57437),a=n(65588),o=n(13439),s=n(2265),i=n(80590),l=n(97753),c=n(55914),u=n(71399),d=n(16909),f=n.n(d),h=n(47907),p=n(27305);let g={open:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},closed:{opacity:0,y:20,transition:{duration:.2}}};function m(){let e=(0,h.useRouter)(),{user:t,setUser:n}=(0,p.useAppContext)(),[d,m]=(0,s.useState)(!1),_=(0,s.useRef)(null),x=()=>{d&&m(!1)},C=async()=>{try{await a.Z.logoutFromNextClientToNextServer(),e.push("/login")}catch(e){console.log(e)}finally{n(null),e.refresh(),localStorage.removeItem("token")}};return(0,r.jsx)(i.default,{xs:"auto",className:f().avatarContainer,children:(0,r.jsxs)(o.E.nav,{layout:!0,initial:!1,animate:d?"open":"closed",children:[(0,r.jsx)(l.default,{ref:_,onClick:()=>{m(!d)},children:(0,r.jsxs)(c.default,{className:"".concat(f().usernameContainer),children:[(0,r.jsx)(i.default,{xs:"auto",className:f().userName,children:(null==t?void 0:t.name)||"User"}),(0,r.jsx)(i.default,{xs:"auto",children:(0,r.jsx)(u.m3W,{size:"2em"})})]})}),(0,r.jsxs)(o.E.ul,{className:f().listInfor,variants:{open:{clipPath:"inset(0% 0% 0% 0% round 10px)",transition:{bounce:0,duration:.5,delayChildren:.3,staggerChildren:.05},display:"inline"},closed:{clipPath:"inset(10% 5% 90% 5% round 10px)",transition:{bounce:0,duration:.2,display:"inline"},display:"none"}},style:{pointerEvents:d?"auto":"none"},children:[(0,r.jsx)(o.E.li,{className:f().accList,variants:g,onClick:t=>{x(),e.push("/dashboard/information")},children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,r.jsx)(o.E.li,{className:f().accList,variants:g,onClick:C,children:"Đăng xuất"})]})]})})}},53824:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return _}});var r=n(57437),a=n(79769),o=n(97753),s=n(22282),i=n(56205),l=n(42362),c=n(47907),u=n(2265),d=n(8792),f=n(2261),h=n(27305),p=n(16909),g=n.n(p),m=n(8602);function _(){let e=(0,c.useRouter)(),[t,n]=(0,u.useState)(!1),p=f.Z.NEXT_PUBLIC_COMPANY_NAME||"Next.js App",{user:_}=(0,h.useAppContext)(),x=()=>{window.scrollY>=100?n(!0):n(!1)};return(0,u.useEffect)(()=>(window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[]),(0,r.jsx)("header",{children:(0,r.jsx)(a.Z,{expand:"lg",fixed:"top",className:"".concat(g().headerContainer," ").concat(t?g().active:""),children:(0,r.jsxs)(o.default,{children:[(0,r.jsxs)(a.Z.Brand,{onClick:()=>{e.push("/")},children:[(0,r.jsx)(l.jF1,{size:"3rem"}),p]}),(0,r.jsx)(a.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,r.jsxs)(a.Z.Collapse,{id:"basic-navbar-nav",className:"".concat(g().navbarToggle),children:[(0,r.jsxs)(s.Z,{className:"me-auto",children:[(0,r.jsx)(d.default,{href:"/",className:"nav-link",children:"Trang chủ"}),(0,r.jsxs)(i.Z,{title:"Tra cứu",id:"basic-nav-dropdown",children:[(0,r.jsx)(i.Z.Item,{onClick:()=>{e.push("/customer/lookup-order")},children:"Tra cứu đơn h\xe0ng"}),(0,r.jsx)(i.Z.Item,{onClick:()=>{e.push("/customer/lookup-transaction")},children:"Tra cứu bưu cục"})]})]}),_?(0,r.jsx)(m.default,{}):(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(d.default,{href:"/login",className:"btn btn-primary",style:{marginRight:"10px"},children:"Đăng nhập"}),(0,r.jsx)(d.default,{href:"/register",className:"btn btn-primary",children:"Đăng k\xed"})]})]})]})})})}},2261:function(e,t,n){"use strict";var r=n(30248);let a=r.z.object({NEXT_PUBLIC_COMPANY_NAME:r.z.string(),NEXT_PUBLIC_API_ENDPOINT:r.z.string(),NEXT_PUBLIC_COMPANY_DESCRIPTION:r.z.string()}).safeParse({NEXT_PUBLIC_COMPANY_NAME:"Giao hang GTK",NEXT_PUBLIC_API_ENDPOINT:"http://localhost:8000",NEXT_PUBLIC_COMPANY_DESCRIPTION:"Company Description"});if(!a.success)throw console.error(a.error.issues),Error("C\xe1c gi\xe1 trị khai b\xe1o trong file .env kh\xf4ng hợp lệ");let o=a.data;t.Z=o},89348:function(e,t,n){"use strict";n.d(t,{Xs:function(){return l}});var r=n(2261),a=n(22169),o=n(47907),s=n(86123);class i extends Error{constructor({status:e,payload:t}){super("Http Error"),this.status=e,this.payload=t}}class l extends i{constructor({status:e,payload:t}){super({status:e,payload:t}),this.status=e,this.payload=t}}let c=()=>!0,u=null,d=async(e,t,n)=>{let d;(null==n?void 0:n.body)instanceof FormData?d=n.body:(null==n?void 0:n.body)&&(d=JSON.stringify(n.body));let f=d instanceof FormData?{}:{"Content-Type":"application/json"};if(c()){let e=localStorage.getItem("token");e&&(f.Authorization="Bearer ".concat(e))}let h=(null==n?void 0:n.baseUrl)===void 0?r.Z.NEXT_PUBLIC_API_ENDPOINT:n.baseUrl,p=t.startsWith("/")?"".concat(h).concat(t):"".concat(h,"/").concat(t),g=await fetch(p,{...n,headers:{...f,...null==n?void 0:n.headers},body:d,method:e}),m=await g.json(),_={status:g.status,payload:m};if(!g.ok){if(422===g.status)throw new l(_);if(401===g.status){if(c()){if(!u){u=fetch("/api/auth/logout",{method:"POST",body:JSON.stringify({force:!0}),headers:{...f}});try{await u}catch(e){}finally{localStorage.removeItem("token"),u=null,location.href="/login"}}}else{var x;let e=null==n?void 0:null===(x=n.headers)||void 0===x?void 0:x.Authorization.split("Bearer ")[1];(0,o.redirect)("/logout?token=".concat(e))}}else if(403===g.status)console.log("Forbidden error"),location.href="/",s.toast.error("Kh\xf4ng c\xf3 quyền truy cập");else throw new i(_)}if(c()){if("api/users/login"===(0,a.AH)(t)){let{token:e}=m.data;localStorage.setItem("token",e)}else"api/auth/logout"===(0,a.AH)(t)&&localStorage.removeItem("token")}return _};t.ZP={get:(e,t)=>d("GET",e,t),post:(e,t,n)=>d("POST",e,{...n,body:t}),put:(e,t,n)=>d("PUT",e,{...n,body:t}),delete:(e,t)=>d("DELETE",e,{...t})}},22169:function(e,t,n){"use strict";n.d(t,{AH:function(){return d},Ft:function(){return g},Qe:function(){return h},Xc:function(){return m},ZH:function(){return f},jg:function(){return u},o0:function(){return p},p6:function(){return c}});var r=n(42151),a=n.n(r),o=n(89348),s=n(86123),i=n(89539),l=n.n(i);function c(e){return new Date(a()(e).format("YYYY-MM-DD").replace(/-/g,""))}let u=(e,t)=>t<=7?Array.from({length:t},(e,t)=>t+1):e<=3?[1,2,3,"...",t-1,t]:e>=t-2?[1,2,"...",t-2,t-1,t]:[1,"...",e-1,e,e+1,"...",t],d=e=>e.startsWith("/")?e.slice(1):e,f=e=>{let{error:t,setError:n,message:r,duration:a}=e;t instanceof o.Xs&&n?t.payload.error.forEach(e=>{n(e.field,{type:"manual",message:e.message[0]})}):s.toast.error(r||t.payload.message||"Y\xeau cầu thất bại!",{autoClose:a||3e3})},h=e=>e?l()(e).format("YYYY-MM-DD"):"",p=e=>e?l()(e).format("HH:mm DD-MM-YYYY"):"";function g(e){let t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}function m(e){let t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},3654:function(e){e.exports={footer:"footer_footer__7qdul",container:"footer_container__5U4ea",footerMenu:"footer_footerMenu__v3ANo"}},16909:function(e){e.exports={headerContainer:"header_headerContainer__CorOR",active:"header_active__LV7tt",navbarToggler:"header_navbarToggler__psBhx",avatarContainer:"header_avatarContainer__wRM_f",userName:"header_userName__uPPuO",usernameContainer:"header_usernameContainer__Cem_r",listInfor:"header_listInfor__DKYr0",accList:"header_accList__WGGxp"}}}]);